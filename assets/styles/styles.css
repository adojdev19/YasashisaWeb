/* =========================================
   YASASHISA — MOBILE FIRST (iPhone 15)
   Reemplaza tu styles.css completo por esto.
   ========================================= */

:root{
  /* Tipografía */
  --ui-font: 'Mochiy Pop One', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  /* Caja diálogo */
  --dlg-bg: rgba(0,0,0,0.62);
  --dlg-pad-x: 4vw;
  --dlg-pad-y: 1.6vh;

  /* Tamaños texto */
  --name-size: 2.0vh;
  --text-size: 1.75vh;

  /* Sprites */
  --center-h: 92vh;  /* sprite principal */
  --side-h: 82vh;    /* laterales si los usas */
}

*{ box-sizing: border-box; }

html, body{
  width: 100%;
  height: 100%;
  margin: 0;
  background: #000;
  overflow: hidden;
  font-family: var(--ui-font);
  -webkit-text-size-adjust: 100%;
  text-rendering: optimizeLegibility;
}

#game{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* ===== Background ===== */
#background{
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 1;
  transition: opacity 0.35s ease;
  will-change: opacity;
}

/* ===== Characters ===== */
.character{
  position: absolute;
  bottom: 0;
  width: auto;
  height: var(--center-h);
  transform-origin: bottom center;
  will-change: transform, opacity;

  /* mejora visual sin matar performance */
  filter:
    drop-shadow(0px 12px 22px rgba(0,0,0,0.45))
    brightness(1.02)
    contrast(1.02)
    sepia(0.14)
    saturate(1.06);
}

/* mobile: centrado real, sin bottoms negativos */
#charCenter{
  left: 50%;
  transform: translateX(-50%);
  height: var(--center-h);
}

#charLeft{
  left: 18%;
  transform: translateX(-50%);
  height: var(--side-h);
  opacity: 0.92;
}

#charRight{
  left: 82%;
  transform: translateX(-50%);
  height: var(--side-h);
  opacity: 0.92;
}

/* Dim/focus */
.dim{ filter: brightness(0.62) !important; }
.focused{ transform: translateX(-50%) scale(1.02); }
.unfocused{ transform: translateX(-50%) scale(0.98); }

/* ===== Dialogue Box ===== */
#dialogueBox{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  z-index: 30;

  background: var(--dlg-bg);
  color: rgba(255,255,255,0.96);

  padding:
    calc(var(--dlg-pad-y) + env(safe-area-inset-top, 0px))
    var(--dlg-pad-x)
    calc(var(--dlg-pad-y) + env(safe-area-inset-bottom, 0px))
    var(--dlg-pad-x);

  /* para que sea legible y no tape TODO */
  max-height: 34vh;
  overflow: hidden;

  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);

  border-top: 1px solid rgba(255,255,255,0.10);
}

#name{
  font-weight: 700;
  font-size: clamp(14px, var(--name-size), 18px);
  margin: 0 0 0.6vh 0;
  letter-spacing: 0.02em;
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
}

#text{
  font-size: clamp(14px, var(--text-size), 18px);
  line-height: 1.55;
  white-space: pre-wrap;
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
}

/* ===== Choices ===== */
#choices{
  position: absolute;
  left: 0;
  right: 0;

  /* arriba del diálogo */
  bottom: calc(34vh + 1vh);
  z-index: 40;

  display: flex;
  flex-direction: column;
  gap: 10px;

  padding: 0 6vw;
  pointer-events: auto;
}

.choiceBtn{
  width: 100%;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 14px;

  background: rgba(0,0,0,0.72);
  color: rgba(255,255,255,0.96);

  padding: 14px 14px;
  font-size: 15px;
  letter-spacing: 0.02em;

  box-shadow: 0 10px 22px rgba(0,0,0,0.25);
}

.choiceBtn:active{
  transform: scale(0.99);
}

/* ===== Poem Mode ===== */
#dialogueBox.poemMode{
  top: 8vh;
  bottom: 8vh;
  left: 6vw;
  right: 6vw;
  width: auto;
  position: absolute;

  max-height: none;
  overflow: hidden;

  background: rgba(8,8,12,0.78);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);

  padding: 3vh 5vw;

  display: flex;
  align-items: center;
  justify-content: center;
}

#dialogueBox.poemMode #name{ display:none; }

#dialogueBox.poemMode #text{
  text-align: center;
  font-size: clamp(15px, 2.1vh, 18px);
  line-height: 1.95;
  letter-spacing: 0.01em;
}

/* hint poema */
#poemHint{
  margin-top: 14px;
  font-size: 12px;
  opacity: 0;
  transition: opacity 0.35s ease;
  letter-spacing: 0.08em;
  text-align: center;
}
#poemHint.show{ opacity: 0.9; }

/* Sprite poema esquina (si lo usas) */
#yazaPoema{
  position: absolute;
  right: 3vw;
  bottom: calc(34vh + 1vh); /* que no choque con diálogo */
  height: 26vh;
  z-index: 25;
  display: none;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.40));
}

/* ===== Intro/Epilogue Mode ===== */
#dialogueBox.introMode{
  top: 12vh;
  bottom: 12vh;
  left: 6vw;
  right: 6vw;
  width: auto;
  position: absolute;

  max-height: none;

  background: rgba(8,8,12,0.70);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);

  padding: 3vh 5vw;

  display:flex;
  align-items:center;
  justify-content:center;
}

#dialogueBox.introMode #name{ display:none; }
#dialogueBox.introMode #text{
  text-align:center;
  font-size: clamp(15px, 2.2vh, 19px);
  line-height: 2.0;
}

/* ===== Fade Overlay ===== */
#fadeOverlay{
  position: absolute;
  inset: 0;
  background: #000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.2s ease;
  z-index: 100;
}

/* ===== Mirror ===== */
.mirror{
  transform: translateX(-50%) scaleX(-1) !important;
  transition: transform 0.25s ease;
}

/* =========================================
   PRELOADER (startScreen) — mobile first
   ========================================= */
#startScreen{
  position: fixed;
  inset: 0;
  z-index: 9999;
  overflow: hidden;

  display: grid;
  place-items: center;

  background: #000;
  color: rgba(255,255,255,0.95);
}

.sunsetBg{
  position: absolute;
  inset: 0;
  background-image: url("../backgrounds/pre_sakura_sunset.png");
  background-size: cover;
  background-position: center;

  transform: scale(1.04);
  animation: subtleMove 12s ease-in-out infinite alternate;

  filter: saturate(1.06) contrast(1.03);
}

.sunsetBg::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(to bottom,
    rgba(255,255,255,0.06) 0%,
    rgba(255,210,220,0.12) 35%,
    rgba(255,170,150,0.12) 60%,
    rgba(0,0,0,0.35) 100%);
}

/* capa pétalos (la tuya con JS) */
.petalLayer{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 5;
}

.startCard{
  position: relative;
  z-index: 10;

  width: min(92vw, 420px);
  padding: 22px 18px;
  border-radius: 18px;

  text-align: center;

  background: rgba(255, 210, 220, 0.22);
  border: 1px solid rgba(255,255,255,0.22);

  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  box-shadow: 0 18px 50px rgba(0,0,0,0.35);
}

.badge{
  display:inline-block;
  font-size: 11px;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.20);
  letter-spacing: 0.10em;
  text-transform: uppercase;
}

.title{
  margin: 14px 0 6px;
  font-size: clamp(28px, 4.2vh, 40px);
  letter-spacing: 0.06em;

  background: linear-gradient(180deg, #ffffff, #ffd9e8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;

  text-shadow: 0 4px 18px rgba(0,0,0,0.22);
}

.subtitle{
  margin: 0 0 12px;
  font-size: 14px;
  opacity: 0.95;
}

.instructions{
  margin: 12px 0 12px;
  padding: 12px 12px;
  border-radius: 14px;

  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.12);
}
.instructions p{
  margin: 0;
  font-size: 13px;
  line-height: 1.6;
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
}

.signature{
  margin: 10px 0 14px;
  font-size: 12px;
  opacity: 0.88;
  font-style: italic;
  text-align: right;
}

.startBtn{
  width: 100%;
  padding: 14px 14px;
  border: 0;
  border-radius: 16px;

  background: linear-gradient(90deg, #f4a7c3, #fbc2a4);
  color: rgba(255,255,255,0.95);

  font-size: 14px;
  letter-spacing: 0.06em;

  box-shadow: 0 10px 24px rgba(0,0,0,0.25);
}

.startBtn:active{ transform: scale(0.99); }

@keyframes subtleMove{
  from{ transform: scale(1.04) translateY(-6px); }
  to{ transform: scale(1.08) translateY(6px); }
}
